<section class="vbox">

    <header class="bg-primary header header-md navbar navbar-fixed-top-xs box-shadow" ng-include="header"></header>

    <section class="ir-content">
        <section class="hbox stretch">

            <aside ng-include="'modules/partials/sidebar.html'" id="nav"
                   class="bg-light lt b-r b-light aside-md hidden-print"></aside>

            <section id="content">
                <section class="vbox">
                    <div class="hidden-xs">
                        <header class="header bg-white b-b b-light hide-for-small hide-for-touch"
                                ng-include="'modules/restaurant/views/search-form.html'"></header>
                    </div>

                    <!--Dynamic view goes here-->

                    <section class="vbox">
                        <section class="scrollable padder">
                            <section class="row m-b-md">
                                <div class="col-sm-8">
                                    <h3 class="m-b-xs text-black">{{restaurant.name}}
                                        <button class="btn btn-default btn-rounded btn-sm m-l-xs"
                                                data-toggle="class:nav-xs"
                                                ng-click="showMap = ! showMap">
                                            <i class="fa fa-map-marker fa-lg text-primary"></i> Map
                                        </button>
                                        <button class="btn btn-default btn-rounded btn-sm m-l-xs" ng-show="isLogged"
                                                ng-click="favourite()">
                                            <!--<i class="icon fa fa-star-o" ng-show="! isFavourite"></i>-->
                                            <span ng-show="! isFavourite">Add as favourite</span>
                                            <i class="icon fa fa-star text-warning" ng-show="isFavourite"></i>
                                        </button>
                                        <button class="btn btn-default btn-rounded btn-sm m-l-xs"
                                                ng-click="claim()" ng-hide="isOwner"> Claim this Restaurant
                                        </button>
                                        <div class="modal-backdrop fade in"></div>
                                    </h3>
                                    <small> {{restaurant.address}}
                                    </small>

                                </div>

                                <!--Includes claim section-->
                                <div class="col-sm-4 m-t-lg">

                                    <!--<div share-links="Facebook, Twitter, LinkedIn, Google-Plus"-->
                                    <!--share-title="reviews-combined dummy title" class="m-r-md pull-right">-->
                                    <!--</div>-->
                                    <!--Social share button-->
                                    <button class="btn btn-default btn-rounded m-t-sm m-r-md pull-right"
                                            popover-template="'modules/partials/share-popover.html'"
                                            popover-placement="left" popover-trigger="focus"
                                            popover-append-to-bod="true">
                                        <span class="i i-share"></span>
                                        <span class="m-l-xs"> Share</span>
                                    </button>


                                </div>

                                <!--<div class="col-sm-4 text-right m-t-md">-->

                                <!--  Commented for future references -->
                                <!--<a class="btn btn-icon b-2x btn-info btn-rounded hover dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">-->
                                <!--<i class="fa fa-bars"></i>-->
                                <!--</a>-->
                                <!--<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">-->
                                <!--<li role="presentation"><a tabindex="-1" href="#/manage/photos/{{ restaurantId }}">Restaurant Owner Manage Photos</a></li>-->
                                <!--<li role="presentation"><a tabindex="-1" href="#/dashboard/{{ restaurantId }}">Go to restaurant Owner Dashboard</a></li>-->
                                <!--<li role="presentation"><a tabindex="-1" href="#/request/change/{{ restaurantId }}">Go to Request Information Change by owner</a></li>-->
                                <!--</ul>-->

                                <!--<a class="btn btn-icon b-2x btn-default btn-rounded hover">-->
                                <!--<i class="i i-bars3 hover-rotate"></i></a> -->
                                <!--<a href="#nav, #sidebar"-->
                                <!--class="btn btn-icon b-2x btn-info btn-rounded"-->
                                <!--data-toggle="class:nav-xs, show"><i-->
                                <!--class="fa fa-bars"></i></a>-->

                                <!--</div>-->

                            </section>
                            <div class="row m-b-md" ng-if="showMap">
                                <div class="col-sm-12" ng-controller="mapCtrl">
                                    <div class="panel panel-info">
                                        <div class="panel-body">
                                            <div ng-include="'modules/restaurant/views/map.html'"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="panel b-a">
                                        <div class="row m-n">
                                            <div class="col-md-6 b-b b-r"><a class="block padder-v hover">
                    <span class="i-s i-s-2x pull-left m-r-sm"> <i
                            class="i i-hexagon2 i-s-base text-danger hover-rotate"></i> <i
                            class="i i-users2 i-1x text-white"></i> </span> <span
                                                    class="clear"> <span class="h3 block m-t-xs text-danger">{{stats.total_reviews}}</span> <small
                                                    class="text-muted text-u-c">Total Reviews
                                            </small> </span> </a></div>
                                            <div class="col-md-6 b-b"><a class="block padder-v hover"> <span
                                                    class="i-s i-s-2x pull-left m-r-sm"> <i
                                                    class="i i-hexagon2 i-s-base text-success-lt hover-rotate"></i> <i
                                                    class="i i-plus2 i-sm text-white"></i> </span> <span
                                                    class="clear"> <span class="h3 block m-t-xs text-success">{{stats.current_rating}}</span> <small
                                                    class="text-muted text-u-c">Ireview Ranking
                                            </small> </span> </a></div>
                                            <div class="col-md-6 b-b b-r"><a class="block padder-v hover"> <span
                                                    class="i-s i-s-2x pull-left m-r-sm"> <i
                                                    class="i i-hexagon2 i-s-base text-info hover-rotate"></i> <i
                                                    class="i i-location i-sm text-white"></i> </span> <span
                                                    class="clear"> <span class="h3 block m-t-xs text-info">{{restaurant.distance | number : 1}}
                        <span ng-hide="restaurant.distance">N/A</span><span
                                                        class="text-sm" ng-show="restaurant.distance">KM</span></span> <small
                                                    class="text-muted text-u-c">
                                                location
                                            </small> </span> </a></div>
                                            <div class="col-md-6 b-b"><a class="block padder-v hover"> <span
                                                    class="i-s i-s-2x pull-left m-r-sm"> <i
                                                    class="i i-hexagon2 i-s-base text-primary hover-rotate"></i> <i
                                                    class="i i-alarm i-sm text-white"></i> </span> <span
                                                    class="clear"> <span class="h3 block m-t-xs text-primary">{{stats.current_percentile | number :2}}</span> <small
                                                    class="text-muted text-u-c">Current Rating
                                            </small> </span> </a></div>
                                            <div class="col-md-6 b-b b-r"><a class="block padder-v hover"> <span
                                                    class="i-s i-s-2x pull-left m-r-sm"> <i
                                                    class="i i-hexagon2 i-s-base text-success-lter hover-rotate"></i> <i
                                                    class="fa fa-arrow-circle-up text-white"></i> </span> <span
                                                    class="clear"> <span
                                                    class="h3 block m-t-xs text-info">{{stats.max_percentile | number : 2}}%
                        </span> <small class="text-muted text-u-c">
                                                Maximum Rating
                                            </small> </span> </a></div>
                                            <div class="col-md-6 b-b"><a class="block padder-v hover"> <span
                                                    class="i-s i-s-2x pull-left m-r-sm"> <i
                                                    class="i i-hexagon2 i-s-base text-danger-lter hover-rotate"></i> <i
                                                    class=" fa fa-arrow-circle-down text-white"></i> </span> <span
                                                    class="clear"> <span
                                                    class="h3 block m-t-xs text-primary">{{stats.min_percentile | number : 2}}%</span> <small
                                                    class="text-muted text-u-c">Minimum Rating
                                            </small> </span> </a></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-sm-6">
                                    <section class="panel panel-default">

                                        <div class="list-group no-radius alt">
                <span class="list-group-item" ng-hide="!restaurant.phone">
                    <span class="badge bg-success"></span>
                    <i class="fa fa-phone icon-muted m-r-sm"></i>
                    Phone : {{restaurant.phone}}

                    <a class="m-l" href="#/settings/restaurant/{{restaurantId}}/info" ng-show="isOwner">Edit</a>
                </span>
                <span class="list-group-item" ng-hide="!restaurant.email">
                    <span class="badge bg-info"></span>
                    <i class="fa fa-envelope icon-muted m-r-sm"></i>
                    Email : {{restaurant.email}}

                    <a class="m-l" href="#/settings/restaurant/{{restaurantId}}/info" ng-show="isOwner">Edit</a>
                </span>
                <span class="list-group-item">
                    <span class="badge bg-money"></span>
                    <i class="fa fa-eye icon-muted m-r-sm"></i>
                    <span>Price Range :</span>

                    <span class="text-primary-dk ir-price">
                        <!--<rating ng-model="restaurant.price_range" state-on="'glyphicon-usd'" state-off="'blank'" readonly="true"></rating>-->
                        {{restaurant.price_range_symbol}}
                    </span>

                    <a class="m-l" href="#/settings/restaurant/{{restaurantId}}/info" ng-show="isOwner">Edit</a>
                </span>
                                        </div>

                                    </section>

                                    <section class="panel panel-info" ng-hide="! restaurant.category">
                                        <div class="panel-body">
                                            <div class="clear">
                                                <a class="btn btn-xs btn-success m-t-xs m-r-xs"
                                                   ng-repeat="category in restaurant.category.split(',')">
                                                    {{category}}
                                                </a>
                                            </div>
                                        </div>
                                    </section>
                                </div>

                            </div>

                            <div class="row bg-white dk m-b" ng-controller="graphCtrl">

                                <!--Message when empty-->
                                <div class="m-b-lg m-t-lg text-center" ng-show="noGraphs">
                                    Not enough data to show analytics graph
                                </div>
                                <!--Duration and date pickers-->
                                <div class="clearfix m m-b-sm pull-right z-index-10" ng-hide="noGraphs">
                                    <div class="btn-group pull-right dropdown">
                                        <button data-toggle="dropdown"
                                                class="btn btn-sm btn-rounded btn-default dropdown-toggle m-b-xs m-r-sm z-index-10">
                                            <span>{{graphDuration.label}}</span> <span
                                                class="caret"></span></button>
                                        <ul class="dropdown-menu">
                                            <li ng-repeat="option in graphDurations"
                                                ng-show="graphs[option.value].trend.length">
                                                <a class="pointer" ng-click="refreshGraphs(option)">
                                                    {{ option.label }}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="pointer" ng-click="getGraphs(customPeriod)">
                                                    Custom Period
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="pull-right">
                                        <div class="btn-group pull-right input-group m-r-sm m-b-xs no-padding-m adjust-left z-index-10"
                                             style="width: 200px;" ng-hide="graphDuration.value">
                                            <span class="input-group-addon btn-rounded">End:</span>
                                            <input type="text" class="form-control input-sm "
                                                   datepicker-popup="dd/MM/yyyy" ng-model="dates.end.date"
                                                   is-open="dates.end.opened" max-date="{{dates.today}}"
                                                   ng-change="getGraphs(customPeriod)"
                                                   ng-required="true" close-text="Close"
                                                   datepicker-append-to-body="true"/>
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-rounded input-sm "
                                        ng-click="openCalendar($event, 'end')"><i
                                        class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                                        </div>
                                        <div class="btn-group pull-right input-group m-r-sm m-b-xs no-padding-m adjust-left z-index-10"
                                             style="width: 200px;" ng-hide="graphDuration.value">
                                            <span class="input-group-addon btn-rounded">Start:</span>
                                            <input type="text" class="form-control input-sm "
                                                   datepicker-popup="dd/MM/yyyy" ng-model="dates.start.date"
                                                   is-open="dates.start.opened" max-date="{{dates.today}}"
                                                   ng-change="getGraphs(customPeriod)"
                                                   ng-required="true" close-text="Close"
                                                   datepicker-append-to-body="true"/>
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-rounded input-sm "
                                        ng-click="openCalendar($event, 'start')"><i
                                        class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-7 col-sm-12 " ng-hide="noGraphs">
                                    <section>
                                        <header class="font-bold padder-v">
                                            <span class="m-l-lg">Statistics</span>

                                        </header>
                                        <div class="panel-body flot-legend">
                                            <!--<div id="flot-sp1ine" style="height:210px"></div> -->

                                            <flot dataset="flotDataset" options="flotOptions" height="212px"></flot>

                                        </div>
                                        <div class="panel-body flot-legend m-t-lg" ng-show="user.ownsRestaurants">
                                            <flot dataset="scatterFlotDataset" options="scatterFlotOptions"
                                                  height="212px"></flot>
                                        </div>
                                        <!--<div class="row text-center no-gutter">-->
                                        <!--<div class="col-xs-1"></div>-->
                                        <!--<div class="col-xs-2"><span class="h4 font-bold m-t block">{{stats.total}}</span>-->
                                        <!--<small class="text-muted m-b block">Total Reviews</small>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-2"><span class="h4 font-bold m-t block">{{stats['<60']}}</span>-->
                                        <!--<small class="text-muted m-b block">&lt; 60%</small>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-2"><span class="h4 font-bold m-t block">{{stats['60-70']}}</span>-->
                                        <!--<small class="text-muted m-b block">&gt; 60%</small>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-2"><span class="h4 font-bold m-t block">{{stats['71-80']}}</span>-->
                                        <!--<small class="text-muted m-b block">&gt; 70%</small>-->
                                        <!--</div>-->
                                        <!--<div class="col-xs-2"><span class="h4 font-bold m-t block">{{stats['>80']}}</span>-->
                                        <!--<small class="text-muted m-b block">&gt; 80%</small>-->
                                        <!--</div>-->
                                        <!--</div>-->
                                    </section>

                                </div>
                                <div class="col-md-5 col-sm-12" ng-hide="noGraphs">
                                    <section>
                                        <header class="font-bold padder-v">
                                            <span class="m-l-md">Ratings Distribution</span>

                                        </header>
                                        <!--<div class="row" ng-repeat="">-->
                                        <div class="m-b-md">
                                            <div class="row" ng-repeat="rating in [5,4,3,2,1]">
                                                <div class="col-xs-4">
                                                    <div class="text-right">{{ stats.ratings[rating].label }}</div>
                                                </div>
                                                <div class="col-xs-4">
                                                    <div style="width: 100%; height: 17px" class="">
                                                        <div style="width: 100%; height: 13px; background-color: #e4e4e4; margin-top: 4px;">
                                                            <div style="width: {{ stats.ratings[rating].count / stats.total * 100 }}%; height: 13px; background-color: #3689c1;">

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xs-3"><span
                                                        class="">{{ stats.ratings[rating].count }}</span></div>
                                            </div>
                                        </div>
                                    </section>
                                    <section>
                                        <header class="font-bold m-l-md m-t-lg">
                                            Sources
                                        </header>
                                        <div class="panel-body flot-legend" style="padding-top: 0;">
                                            <flot dataset="donutDataset" options="donutOptions" height="240px"></flot>
                                        </div>
                                    </section>

                                </div>
                            </div>

                            <div class="row">

                                <div class="col-lg-6" ng-include="reviewBox" ng-controller="reviewCtrl">
                                </div>
                                <div class="col-lg-6">
                                    <section class="panel panel-default">
                                        <header class="panel-heading">Photos</header>
                                        <section class="chat-list panel-body">
                                            <!--<section class="row m-l-none m-r-none m-b text-center box-shadow"> -->
                                            <div class="m-l-sm" ng-hide="photos.length">
                                                No photos
                                            </div>
                                            <!--{{ photo }}-->
                                            <a class="col-lg-4 col-sm-3 col-xs-4 no-padding block"
                                               href="" ng-click="openLightboxModal($index)" ng-repeat="photo in photos">
                                                <span class="thumb-image"
                                                      style="background-image:url('{{photo.url}}')"> </span>
                                            </a>
                                            <!--<div class="col-xs-4 no-padding">-->
                                            <!--<img src="images/r2.jpeg" style="width:100%;padding:0px 2px;min-height: 124px;"/>-->
                                            <!--</div>-->
                                            <!--<div class="col-xs-4 no-padding">-->
                                            <!--<img src="images/r3.jpg" style="width:100%;padding:0px 2px;min-height: 124px;"/>-->
                                            <!--</div>-->
                                        </section>
                                    </section>
                                </div>

                            </div>

                        </section>

                        <!--<footer class="ir-footer" ng-include="footer"></footer>-->

                    </section>
                    <!--<a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a>-->
                </section>

            </section>
        </section>
    </section>
</section>