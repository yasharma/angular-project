<div ng-include="navigation"></div>

<div class="container-fluid content">
<div class="row">

<div class="col-sm-8 right-col">
<div class="container-fluid top20 detail-section" ng-controller="detailCtrl">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Restaurant Info</h3>
        </div>
        <table class="table">
            <tbody>
            <tr class="grey-bg">
                <td>Name:</td>
                <td>{{restaurant.name}}</td>
            </tr>
            <tr class="grey-bg">
                <td>Category:</td>
                <td>{{restaurant.category}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="container-fluid detail-tabs">
    <div class="nav-custom-justified">
        <div class="item col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <span class=""><img src="images/call.png"></span>
            <a href="" class="" ng-click="showPhone()">Call</a>
        </div>
        <div class="item col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <span class=""><img src="images/map.png"></span>
            <a href="" class="" ng-click="getMap()"> Map </a>
        </div>
        <div class="active item col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <span class=""><img src="images/save.png"></span>
            <a href="" class=""> Save </a>
        </div>
        <div class="item col-xs-3 col-sm-3 col-md-3 col-lg-3">
            <span class=""><img src="images/photos.png"></span>
            <a href="" class="" ng-click="getPhotos()"> Photos </a>
        </div>
    </div>
</div>

<div class="container-fluid" ng-if="mapIsReady">
    <ui-gmap-google-map center="map.center" zoom="map.zoom"></ui-gmap-google-map>
</div>

<div class="container-fluid top20" ng-repeat="photo in photos">
    <div class="col-md-3 col-sm-3 col-xs-3">
        <img class="img-responsive" src="{{photo.url}}">
    </div>
</div>
`


<div class="container-fluid">
    <chart title="Line chart" xData="lineChartXData" yData="lineChartYData" xName="Month" yName="Hit"
           subtitle="Annual Data"></chart>
</div>

<div class="container-fluid top20 graph-bottom">
    <ul class="nav nav-tabs nav-justified">
        <li class="rating">
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <span>Rating</span>
            </div>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <img src="images/signal.png" alt=""> {{stats.current_rating}}
            </div>
        </li>
        <li>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <span>Best</span>
            </div>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                {{stats.max_percentile | number : 2}}
            </div>
        </li>
        <li>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <span>Worst</span>
            </div>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                {{stats.min_percentile | number : 2}}
            </div>
        </li>
        <li>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <span>Reviews</span>
            </div>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                {{stats.total_reviews}}
            </div>
        </li>
        <li class="" ng-class="{true:'trend-green',false:'trend-red'}[stats.current_trend  >= 0]">
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <span>Trend</span>
            </div>
            <div class="col-xs-6 col-sm-12 col-md-12 col-lg-12">
                <img ng-src="{{stats.current_trend >= 0 && 'images/trend-up.png' || 'images/trend-down.png'}}"/>

                {{stats.current_trend | number : 3}}
            </div>
        </li>
    </ul>
</div>

<div class="container-fluid detail-tabs top20">
    <div class="nav-custom-justified">
        <div class="item col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <span class="glyphicon glyphicon-envelope"></span>
            <a href="" class="">
                Email
            </a>
        </div>
        <div class="item col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <span class="glyphicon glyphicon-camera"></span>
            <a href="" class="" ng-click="addNewPhoto()">
                Add Photo
            </a>
        </div>
        <div class="active item col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <span class="glyphicon glyphicon-pencil"></span>
            <a href="" class="">
                Write a Review
            </a>
        </div>
    </div>
</div>

<div class="container-fluid top20">
    <form novalidate name="review-form">
        <input type="hidden" name="restaurant_id" ng-model="reviewForm.restaurant_id"/>

        <div class="row">
            <div class="col-sm-2">
                <label>Rating</label>
            </div>
            <div class="col-sm-10">
                <input type="text" name="rating" ng-model="reviewForm.rating" required/>
            </div>
            <div ng-show="reviewForm.rating.$invalid">Invalid:
                <span ng-show="reviewForm.rating.$error.required">Rating is required.</span>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-2">
                <label>Summary in 4 words</label>
            </div>
            <div class="col-sm-10">
                <input type="text" name="special" ng-model="reviewForm.special"/>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-2">
                <label>Comment</label>
            </div>
            <div class="col-sm-10">
                <textarea name="comment" ng-model="reviewForm.comment"></textarea>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2">
                <label>Email</label>
            </div>
            <div class="col-sm-10">
                <input type="text" name="email" ng-model="reviewForm.email"/>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-2">
                <label>Phone</label>
            </div>
            <div class="col-sm-10">
                <input type="text" name="phone" ng-model="reviewForm.phone"/>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-2">
            </div>
            <div class="col-sm-10">
                <input type="submit" name="submit" value="submit" ng-click="submitReview()"/>
            </div>
        </div>

    </form>

</div>

<div class="container-fluid top20">
    <!--<input type="text" ng-model="myModelObj"> -->
    <input type="file" ng-file-select="onFileSelect($files)">
    <input type="file" ng-file-select="onFileSelect($files)" multiple accept="image/*">

    <div class="button" ng-file-select="onFileSelect($files)" data-multiple="true"></div>
    <div ng-file-drop="onFileSelect($files)" ng-file-drag-over-class="optional-css-class-name-or-function"
         ng-show="dropSupported">drop files here
    </div>
    <div ng-file-drop-available="dropSupported=true"
         ng-show="!dropSupported">HTML5 Drop File is not supported!
    </div>
    <button ng-click="upload.abort()">Cancel Upload</button>
</div>

<div class="container-fluid top20 detail-section" ng-show="reviews">


    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Restaurant Reviews</h3>
        </div>
        <ul class="list-group review-list" ng-repeat="review in reviews">
            <li class="list-group-item grey-bg review-item clearfix">
                <div class="container-fluid">
                    <div class="hidden-xs col-sm-2 col-md-2 col-lg-2 thumb">
                        <img src="images/review.png" alt="">
                    </div>
                    <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
                        <h3 class="title">
                            {{review.special}}
                            <div class="pull-right" show-rating="" data-value="{{review.rating}}"></div>
                        </h3>

                        <p readMore> {{review.comment|limitTo: review.textLength || 150 }}
                            <a ng-click="changeLength(review)"
                               ng-hide="review.textLength || review.comment.length <= 150" class=""
                               style="cursor: pointer;text-decoration: none;"><strong> ... Read More</strong></a>
                        </p>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <pagination total-items="reviewListTotalItems" ng-model="reviewListCurrentPage" max-size="maxSize"
                class="pagination-sm" boundary-links="true" rotate="false" num-pages="numPages"
                ng-change="reviewListPageChanged()" items-per-page="reviewListItemPerPage"></pagination>
</div>

<div class="container-fluid top20">

    <button class="btn btn-primary btn-lg col-xs-12 col-sm-12 col-md-12 col-lg-12">
        Report Incorrect Info
    </button>
</div>

<br class="clear top40">

<p>&nbsp;</p>

</div>

<div class="col-sm-4 col-lg-4 visible-lg-block visible-md-block visible-sm-block" ng-repeat="template in templates">
    <div class="top20" ng-include="template.url">

    </div>
</div>
</div>
<div class="container-fluid footer" ng-include="footer">

</div>

</div>